<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BIYALA - براند</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="../css/styleHome.css">
    <style>
        /* أنماط صفحة البراند */
        .brand-profile-page {
            min-height: 100vh;
            background: var(--space-black);
        }
        
        .brand-header {
            padding: 25px 20px 20px;
            background: var(--card-bg);
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            position: relative;
        }
        
        .brand-back-btn {
            position: absolute;
            top: 20px;
            left: 20px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.1);
            width: 45px;
            height: 45px;
            border-radius: 50%;
            color: var(--light-text);
            font-size: 18px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
        }
        
        .brand-back-btn:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: scale(0.95);
        }
        
        .brand-info-container {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .brand-profile-logo {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--accent-orange), #FF9E6D);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            color: var(--space-black);
            font-weight: 900;
            box-shadow: 0 0 30px rgba(255, 109, 31, 0.4);
            flex-shrink: 0;
        }
        
        .brand-text-info {
            flex: 1;
        }
        
        .brand-name-large {
            font-size: 28px;
            font-weight: 900;
            color: var(--light-text);
            margin-bottom: 5px;
        }
        
        .brand-category-tag {
            display: inline-block;
            background: rgba(255, 109, 31, 0.15);
            color: var(--accent-orange);
            padding: 6px 15px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 10px;
        }
        
        .brand-description {
            color: #B0B5C2;
            line-height: 1.6;
            font-size: 15px;
            margin-bottom: 15px;
        }
        
        .brand-stats-row {
            display: flex;
            gap: 25px;
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.05);
        }
        
        .brand-stat-item {
            text-align: center;
            flex: 1;
        }
        
        .stat-number {
            font-size: 20px;
            font-weight: 800;
            color: var(--light-text);
            display: block;
        }
        
        .stat-label {
            font-size: 13px;
            color: #8A8F9C;
            margin-top: 5px;
        }
        
        .brand-actions {
            display: flex;
            gap: 12px;
            margin-top: 25px;
        }
        
        .brand-action-btn {
            flex: 1;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 12px;
            color: var(--light-text);
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            transition: all 0.3s;
        }
        
        .brand-action-btn.primary {
            background: linear-gradient(135deg, var(--accent-orange), #FF9E6D);
            color: var(--space-black);
            border: none;
            box-shadow: 0 0 20px rgba(255, 109, 31, 0.3);
        }
        
        .brand-action-btn:hover {
            background: rgba(255, 255, 255, 0.1);
        }
        
        .brand-action-btn.primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 0 25px rgba(255, 109, 31, 0.5);
        }
        
        .brand-products-section {
            padding: 25px 20px 100px;
        }
        
        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }
        
        .section-title {
            font-size: 22px;
            font-weight: 800;
            color: var(--light-text);
        }
        
        .products-count {
            font-size: 14px;
            color: #8A8F9C;
            background: rgba(255, 255, 255, 0.05);
            padding: 6px 15px;
            border-radius: 20px;
        }
        
        .brand-tabs {
            display: flex;
            gap: 10px;
            overflow-x: auto;
            padding: 10px 0 20px;
            margin-bottom: 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }
        
        .brand-tabs::-webkit-scrollbar {
            display: none;
        }
        
        .brand-tab {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            padding: 12px 24px;
            border-radius: 50px;
            font-size: 14px;
            font-weight: 600;
            color: #9CA3AF;
            cursor: pointer;
            white-space: nowrap;
            transition: all 0.3s;
        }
        
        .brand-tab.active {
            background: linear-gradient(135deg, var(--accent-orange), #FF9E6D);
            color: var(--space-black);
            border: none;
            box-shadow: 0 0 20px rgba(255, 109, 31, 0.3);
        }
        
        .no-products {
            text-align: center;
            padding: 60px 20px;
            color: #8A8F9C;
        }
        
        .no-products i {
            font-size: 50px;
            margin-bottom: 20px;
            opacity: 0.5;
        }
        
        .no-products h3 {
            font-size: 20px;
            margin-bottom: 10px;
            color: var(--light-text);
        }
        
        /* إضافة قلب في كارت المنتج */
        .heart-btn-in-card {
            position: absolute;
            top: 15px;
            left: 15px;
            background: rgba(231, 76, 60, 0.9);
            color: white;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            transition: all 0.3s;
            z-index: 10;
            opacity: 0;
            transform: scale(0.8);
        }
        
        .heart-btn-in-card.active {
            background: #ff7979;
        }
        
        .masonry-item:hover .heart-btn-in-card {
            opacity: 1;
            transform: scale(1);
        }
        
        /* تحسينات للعرض على الشاشات الكبيرة */
        @media (min-width: 768px) {
            .brand-header {
                padding: 40px 40px 30px;
            }
            
            .brand-profile-logo {
                width: 100px;
                height: 100px;
                font-size: 40px;
            }
            
            .brand-name-large {
                font-size: 36px;
            }
            
            .brand-products-section {
                padding: 40px 40px 100px;
            }
            
            .masonry-grid {
                columns: 3;
                column-gap: 20px;
                padding: 0;
            }
            
            .masonry-item {
                width: 100%;
                margin-bottom: 20px;
            }
        }
        
        @media (min-width: 1024px) {
            .masonry-grid {
                columns: 4;
            }
        }

        /* تحسينات للعرض على الموبايل */
@media (max-width: 767px) {
    .brand-profile-page {
        padding-bottom: 80px;
    }
    
    .brand-header {
        padding: 20px 15px 15px;
    }
    
    .brand-info-container {
        flex-direction: column;
        text-align: center;
        gap: 15px;
    }
    
    .brand-profile-logo {
        margin: 0 auto;
    }
    
    .brand-text-info {
        text-align: center;
    }
    
    .brand-name-large {
        font-size: 24px;
    }
    
    .brand-stats-row {
        flex-wrap: wrap;
        justify-content: center;
        gap: 15px;
    }
    
    .brand-stat-item {
        flex: 0 0 calc(33.333% - 10px);
        min-width: 100px;
    }
    
    .brand-actions {
        flex-wrap: wrap;
    }
    
    .brand-action-btn {
        flex: 0 0 calc(50% - 6px);
    }
    
    .brand-products-section {
        padding: 20px 15px 100px;
    }
    
    .masonry-grid {
        columns: 2 !important;
        column-gap: 10px;
        padding: 0;
    }
    
    .masonry-item {
        margin-bottom: 10px;
        width: 100%;
    }
    
    .product-img {
        height: 180px;
    }
    
    .brand-tabs {
        padding: 10px 15px 15px;
        gap: 8px;
    }
    
    .brand-tab {
        padding: 10px 18px;
        font-size: 13px;
    }
    
    /* تحسين زر العودة */
    .brand-back-btn {
        top: 15px;
        left: 15px;
        width: 40px;
        height: 40px;
    }
    
    /* تحسين الـ Flip Card */
    .card-overlay {
        padding: 10px;
    }
    
    .flip-card {
        height: 90vh;
        max-height: none;
    }
    
    .product-image-large {
        height: 50%;
    }
    
    .front-content {
        padding: 20px;
    }
    
    .brand-logo-large {
        width: 40px;
        height: 40px;
        font-size: 18px;
    }
    
    .brand-name-large {
        font-size: 18px;
    }
    
    .product-price {
        font-size: 28px;
    }
    
    .add-to-cart-front-btn {
        width: calc(100% - 40px);
        margin: 15px 20px 0;
        padding: 14px;
        font-size: 16px;
    }
}

/* للشاشات الصغيرة جداً */
@media (max-width: 360px) {
    .brand-name-large {
        font-size: 22px;
    }
    
    .masonry-grid {
        columns: 1 !important;
    }
    
    .brand-stat-item {
        flex: 0 0 calc(50% - 10px);
    }
    
    .brand-action-btn {
        flex: 0 0 100%;
    }
    
    .product-img {
        height: 200px;
    }
    
    .brand-tab {
        padding: 8px 15px;
        font-size: 12px;
    }
}

/* منع التكبير في حقول الإدخال على iOS */
input, textarea {
    font-size: 16px;
}



/* إصلاحات للـ Safari */
@supports (-webkit-touch-callout: none) {
    .brand-profile-page {
        min-height: -webkit-fill-available;
    }
    
    .flip-card {
        height: -webkit-fill-available;
    }
}

/* إصلاح الـ viewport للـ iOS */
@viewport {
    width: device-width;
    zoom: 1.0;
}

/* تحسين الأداء على الموبايل */
.masonry-item, .brand-card {
    will-change: transform;
}

/* تحسين الظلال للعرض على الموبايل */
.masonry-item {
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
}

/* تحسين زر القلب على الموبايل */
.heart-btn-in-card {
    opacity: 0.9 !important;
    transform: scale(0.9) !important;
}

.masonry-item:hover .heart-btn-in-card {
    opacity: 1 !important;
    transform: scale(1) !important;
}

/* تحسين زر السلة على الموبايل */
.cart-btn-in-card {
    opacity: 0.9 !important;
    transform: scale(0.9) !important;
}

.masonry-item:hover .cart-btn-in-card {
    opacity: 1 !important;
    transform: scale(1) !important;
}

/* تحسين التنقل السفلي على الموبايل */
.bottom-nav {
    height: 60px;
    padding: 8px 5px 12px;
}

.nav-item i {
    font-size: 18px;
    margin-bottom: 4px;
}

.nav-item span {
    font-size: 10px;
}

/* تحسين شريط البحث على الموبايل */
.search-wrapper {
    padding: 0 15px 12px;
    margin-top: 10px;
}

.search-container {
    height: 48px;
    padding: 0 16px;
}

.account-icon {
    width: 48px;
    height: 48px;
    font-size: 18px;
}

/* تحسين العداد على السلة */
.cart-counter {
    top: -6px;
    right: -6px;
    width: 18px;
    height: 18px;
    font-size: 11px;
}

/* تحسين الإشعارات */
.cart-notification {
    top: 70px;
    right: 15px;
    left: 15px;
    padding: 12px 16px;
    font-size: 14px;
}

/* إصلاح مشكلة الـ tap على iOS */
button, a {
    cursor: pointer;
    -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
   
}

/* تحسين الأداء العام */
* {
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
}

/* تحسين التمرير السلس */
html {
    scroll-behavior: smooth;
}

body {
    -webkit-overflow-scrolling: touch;
    
}

/* إصلاح مشكلة الـ 100vh على الموبايل */
.full-height {
    height: 100vh;
    height: -webkit-fill-available;
}

/* تحسين العرض على الشاشات ذات الشق */
.safe-area-inset {
    padding-top: env(safe-area-inset-top);
    padding-bottom: env(safe-area-inset-bottom);
    padding-left: env(safe-area-inset-left);
    padding-right: env(safe-area-inset-right);
}

/* نظام الإشعارات */
.notification-system {
    position: fixed;
    top: 100px;
    right: 20px;
    z-index: 9999;
    display: flex;
    flex-direction: column;
    gap: 10px;
    max-width: 350px;
}

.notification-item {
    background: var(--card-bg);
    border-radius: var(--border-radius-sm);
    padding: 16px;
    border-right: 4px solid var(--accent-orange);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
    border: 1px solid rgba(255, 255, 255, 0.05);
    animation: slideInRight 0.3s ease;
    display: flex;
    align-items: flex-start;
    gap: 12px;
    backdrop-filter: blur(10px);
}

.notification-item.success {
    border-right-color: #2ecc71;
    background: linear-gradient(135deg, rgba(46, 204, 113, 0.1), rgba(39, 174, 96, 0.05));
}

.notification-item.error {
    border-right-color: #e74c3c;
    background: linear-gradient(135deg, rgba(231, 76, 60, 0.1), rgba(192, 57, 43, 0.05));
}

.notification-item.info {
    border-right-color: #3498db;
    background: linear-gradient(135deg, rgba(52, 152, 219, 0.1), rgba(41, 128, 185, 0.05));
}

.notification-icon {
    width: 36px;
    height: 36px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 16px;
    flex-shrink: 0;
}

.notification-item.success .notification-icon {
    background: rgba(46, 204, 113, 0.2);
    color: #2ecc71;
}

.notification-item.error .notification-icon {
    background: rgba(231, 76, 60, 0.2);
    color: #e74c3c;
}

.notification-item.info .notification-icon {
    background: rgba(52, 152, 219, 0.2);
    color: #3498db;
}

.notification-content {
    flex: 1;
}

.notification-title {
    font-weight: 700;
    color: var(--light-text);
    margin-bottom: 4px;
    font-size: 14px;
}

.notification-message {
    color: #B0B5C2;
    font-size: 13px;
    line-height: 1.4;
}

.notification-close {
    background: none;
    border: none;
    color: #8A8F9C;
    font-size: 12px;
    cursor: pointer;
    padding: 0;
    width: 24px;
    height: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 4px;
    transition: all 0.2s;
}

.notification-close:hover {
    background: rgba(255, 255, 255, 0.1);
    color: var(--light-text);
}

@keyframes slideInRight {
    from {
        transform: translateX(100%);
        opacity: 0;
    }
    to {
        transform: translateX(0);
        opacity: 1;
    }
}

@keyframes slideOutRight {
    from {
        transform: translateX(0);
        opacity: 1;
    }
    to {
        transform: translateX(100%);
        opacity: 0;
    }
}

@keyframes fadeOut {
    from {
        opacity: 1;
    }
    to {
        opacity: 0;
    }
}

/* Toast إشعارات سريعة */
.notification-toast {
    position: fixed;
    bottom: 100px;
    right: 20px;
    left: 20px;
    background: var(--card-bg);
    border-radius: var(--border-radius-sm);
    padding: 16px;
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
    border: 1px solid rgba(255, 255, 255, 0.05);
    display: none;
    align-items: center;
    gap: 12px;
    z-index: 9998;
    backdrop-filter: blur(10px);
    animation: slideUp 0.3s ease;
}

.notification-toast.show {
    display: flex;
}

.notification-toast.success {
    border-right: 4px solid #2ecc71;
    background: linear-gradient(135deg, rgba(46, 204, 113, 0.1), rgba(39, 174, 96, 0.05));
}

.notification-toast.error {
    border-right: 4px solid #e74c3c;
    background: linear-gradient(135deg, rgba(231, 76, 60, 0.1), rgba(192, 57, 43, 0.05));
}

.notification-toast.info {
    border-right: 4px solid #3498db;
    background: linear-gradient(135deg, rgba(52, 152, 219, 0.1), rgba(41, 128, 185, 0.05));
}

.toast-content {
    display: flex;
    align-items: center;
    gap: 12px;
    flex: 1;
}

.toast-icon {
    width: 24px;
    height: 24px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 12px;
    flex-shrink: 0;
}

.notification-toast.success .toast-icon {
    background: rgba(46, 204, 113, 0.2);
    color: #2ecc71;
}

.notification-toast.error .toast-icon {
    background: rgba(231, 76, 60, 0.2);
    color: #e74c3c;
}

.notification-toast.info .toast-icon {
    background: rgba(52, 152, 219, 0.2);
    color: #3498db;
}

.toast-message {
    color: var(--light-text);
    font-size: 14px;
    font-weight: 500;
    flex: 1;
}

@keyframes slideUp {
    from {
        transform: translateY(100%);
        opacity: 0;
    }
    to {
        transform: translateY(0);
        opacity: 1;
    }
}

/* للشاشات الصغيرة */
@media (max-width: 768px) {
    .notification-system {
        top: 80px;
        right: 10px;
        left: 10px;
        max-width: none;
    }
    
    .notification-toast {
        bottom: 80px;
        right: 10px;
        left: 10px;
    }
}
    </style>
</head>
<body>
    <!-- شريط البحث مع أيقونة الحساب -->
    <div class="cart-icon-wrapper">
        <div class="cart-icon" id="cart-icon">
            <i class="fas fa-shopping-bag"></i>
        </div>
    </div>
    <div class="search-wrapper">
        <div class="search-container">
            <i class="fas fa-search"></i>
            <input type="text" placeholder="ابحث في منتجات البراند..." id="brand-search-input">
        </div>
        <div class="account-icon" id="account-icon">
            <i class="fas fa-user"></i>
        </div>
    </div>
    
    <!-- صفحة البراند -->
    <div class="brand-profile-page">
        <!-- هيدر البراند -->
        <div class="brand-header">
            <button class="brand-back-btn" id="back-button">
                <i class="fas fa-arrow-right"></i>
            </button>
            
            <div class="brand-info-container">
                <div class="brand-profile-logo" id="brand-logo">C</div>
                <div class="brand-text-info">
                    <h1 class="brand-name-large" id="brand-name">CLAZZY</h1>
                    <span class="brand-category-tag" id="brand-category">موضة</span>
                    <p class="brand-description" id="brand-description">
                        علامة مصرية تقدم تصاميم عصرية وجريئة للموضة اليومية والمناسبات الخاصة
                    </p>
                </div>
            </div>
            
            <div class="brand-stats-row">
                <div class="brand-stat-item">
                    <span class="stat-number" id="products-count">0</span>
                    <span class="stat-label">منتج</span>
                </div>
                <div class="brand-stat-item">
                    <span class="stat-number" id="brand-year">2024</span>
                    <span class="stat-label">سنة التأسيس</span>
                </div>
                <div class="brand-stat-item">
                    <span class="stat-number" id="brand-likes">0</span>
                    <span class="stat-label">إعجاب</span>
                </div>
            </div>
            
            <div class="brand-actions">
                <button class="brand-action-btn" id="share-brand-btn">
                    <i class="fas fa-share-alt"></i> مشاركة
                </button>
                <button class="brand-action-btn primary" id="follow-brand-btn">
                    <i class="far fa-heart"></i> متابعة
                </button>
            </div>
        </div>
        
        <!-- تبويبات -->
        <div class="brand-tabs">
            <div class="brand-tab active" data-tab="products">المنتجات</div>
            <div class="brand-tab" data-tab="about">حول البراند</div>
            <div class="brand-tab" data-tab="collections">الكوليكشن</div>
        </div>
        
        <!-- قسم المنتجات -->
        <div class="brand-products-section">
            <div class="section-header">
                <h2 class="section-title">منتجات البراند</h2>
                <span class="products-count" id="products-count-badge">0 منتج</span>
            </div>
            
            <div class="masonry-grid" id="brand-products-grid">
                <!-- سيتم توليد منتجات البراند هنا -->
            </div>
            
            <div class="no-products" id="no-products" style="display: none;">
                <i class="fas fa-box-open"></i>
                <h3>لا توجد منتجات حالياً</h3>
                <p>سيتم إضافة منتجات جديدة قريباً</p>
            </div>
        </div>
    </div>
    
    <!-- التنقل السفلي -->
    <div class="bottom-nav">
        <div class="nav-item" data-page="home">
            <i class="fas fa-home"></i>
            <div class="nav-glow"></div>
        </div>
        <div class="nav-item" data-page="trending">
            <i class="fas fa-fire"></i>
            <div class="nav-glow"></div>
        </div>
        <div class="nav-item" data-page="explore">
            <i class="fas fa-compass"></i>
            <div class="nav-glow"></div>
        </div>
        <div class="nav-item" data-page="notifications">
            <i class="fas fa-bell"></i>
            <div class="nav-glow"></div>
        </div>
        <div class="nav-item" data-page="profile">
            <i class="fas fa-user"></i>
            <div class="nav-glow"></div>
        </div>
    </div>
    
    <!-- كارت المنتج (نفس الـ Flip Card اللي عاملينه) -->
    <div class="card-overlay" id="product-card-overlay">
        <button class="close-card" id="close-card">
            <i class="fas fa-times"></i>
        </button>
        
        <div class="flip-card" id="flip-card">
            <div class="flip-card-inner">
                <!-- الوجه الأمامي -->
                <div class="card-front">
                    <div class="product-image-large">
                        <i class="fas fa-tshirt"></i>
                    </div>
                    
                    <div class="front-content">
                        <div class="front-header">
                            <div class="brand-info">
                                <div class="brand-logo-large">C</div>
                                <div>
                                    <div class="brand-name-large">CLAZZY</div>
                                    <a class="brand-link" id="view-brand-profile">
                                        <i class="fas fa-external-link-alt"></i> زيارة صفحة البراند
                                    </a>
                                </div>
                            </div>
                            <div class="likes-large">
                                <i class="fas fa-heart"></i>
                                <span>1,245</span>
                            </div>
                        </div>
                        
                        <div class="product-price-section">
                            <div class="product-price">
                                <span class="original-price">$715</span>
                                $500
                            </div>
                            <div class="discount-badge">%30 خصم</div>
                        </div>
                        
                        <!-- زر إضافة إلى السلة -->
                        <button class="add-to-cart-front-btn" id="front-cart-btn">
                            <i class="fas fa-cart-plus"></i>
                            <span>أضف إلى السلة</span>
                        </button>
                    
                        <button class="flip-button" id="flip-to-back">
                            <i class="fas fa-exchange-alt"></i>
                        </button>
                    </div>
                </div>
                
                <!-- الوجه الخلفي -->
                <div class="card-back">
                    <h3>تفاصيل المنتج</h3>
                    <p>هذا المنتج من علامة CLAZZY يتميز بتصميم عصري وأنيق يناسب جميع الأوقات. مصنوع من أجود الخامات التي تضمن الراحة والجودة العالية.</p>
                    
                    <div class="product-details">
                        <div class="detail-item">
                            <span>المقاسات المتاحة</span>
                            <span>S, M, L, XL</span>
                        </div>
                        <div class="detail-item">
                            <span>الألوان</span>
                            <span>أسود، أزرق، رمادي</span>
                        </div>
                        <div class="detail-item">
                            <span>نوع القماش</span>
                            <span>قطن 100%</span>
                        </div>
                        <div class="detail-item">
                            <span>وقت التوصيل</span>
                            <span>3-5 أيام</span>
                        </div>
                    </div>
                    
                    <div class="action-buttons">
                        <button class="action-btn" title="إضافة إلى المفضلة">
                            <i class="far fa-heart"></i>
                        </button>
                        <button class="action-btn brand" title="زيارة صفحة البراند" id="brand-profile-btn">
                            <i class="fas fa-store"></i>
                        </button>
                        <button class="action-btn" title="مشاركة">
                            <i class="fas fa-share-alt"></i>
                        </button>
                    </div>
                        
                    <button class="flip-button" id="flip-to-front" style="position: relative; bottom: 0; left: 0;">
                        <i class="fas fa-exchange-alt"></i>
                    </button>
                         
                    <button class="buy-button-front" id="buy-button">
                        <i class="fas fa-shopping-cart"></i> شراء المنتج
                    </button>
                </div>
            </div>
        </div>
    </div>
<!-- نظام الإشعارات -->
<div class="notification-system" id="notification-system">
    <!-- الإشعارات تضاف هنا ديناميكياً -->
</div>

<div class="notification-toast" id="notification-toast">
    <div class="toast-content">
        <i class="toast-icon"></i>
        <span class="toast-message"></span>
    </div>
</div>
    <script>
        // بيانات المنتجات (نفس البيانات من الصفحة الرئيسية)
        const products = [
            { id: 1, brand: "CLAZZY", price: "$500", originalPrice: "$715", discount: 30, likes: 1245, size: "large", desc: "تيشيرت بوليستر عالي الجودة بتصميم عصري", colors: ["أسود", "أزرق", "رمادي"], sizes: "S, M, L, XL", delivery: "3-5 أيام", fabric: "قطن 100%" },
            { id: 2, brand: "GO K", price: "$350", originalPrice: "$350", discount: 0, likes: 850, size: "medium", desc: "بنطال جينز كلاسيكي يناسب جميع المناسبات", colors: ["أزرق", "أسود"], sizes: "28-38", delivery: "2-4 أيام", fabric: "دينيم" },
            { id: 3, brand: "mmm brand", price: "$280", originalPrice: "$330", discount: 15, likes: 920, size: "small", desc: "هودي قطني دافئ مع جيب كانغر", colors: ["رمادي", "أسود", "أبيض"], sizes: "M, L, XL", delivery: "4-6 أيام", fabric: "قطن فرنسي" },
            { id: 4, brand: "AMB", price: "$420", originalPrice: "$420", discount: 0, likes: 750, size: "medium", desc: "قميص رسمي أنيق للمناسبات الخاصة", colors: ["أبيض", "أزرق فاتح"], sizes: "S, M, L", delivery: "3-5 أيام", fabric: "كتان" },
            { id: 5, brand: "T", price: "$190", originalPrice: "$240", discount: 20, likes: 640, size: "large", desc: "تنورة ميدي بتصميم كلاسيكي وعصري", colors: ["أسود", "بيج", "أحمر"], sizes: "XS, S, M", delivery: "2-3 أيام", fabric: "صوف" },
            { id: 6, brand: "CLAZZY", price: "$600", originalPrice: "$750", discount: 20, likes: 1100, size: "medium", desc: "جاكت جلد طبيعي بتصميم متميز", colors: ["بني", "أسود"], sizes: "M, L, XL", delivery: "5-7 أيام", fabric: "جلد طبيعي" },
            { id: 7, brand: "GO K", price: "$310", originalPrice: "$310", discount: 0, likes: 720, size: "small", desc: "شورت صيفي مريح بتصميم رياضي", colors: ["أزرق", "رمادي", "أخضر"], sizes: "S, M, L", delivery: "1-3 أيام", fabric: "بوليستر" },
            { id: 8, brand: "mmm brand", price: "$270", originalPrice: "$360", discount: 25, likes: 880, size: "large", desc: "بدلة رياضية كاملة بتصميم عصري", colors: ["أسود", "رمادي"], sizes: "S, M, L, XL", delivery: "4-5 أيام", fabric: "مزيج قطني" },
            { id: 9, brand: "AMB", price: "$390", originalPrice: "$390", discount: 0, likes: 690, size: "medium", desc: "بلوزة نسائية بتطريز يدوي مميز", colors: ["أبيض", "وردي"], sizes: "XS, S, M", delivery: "3-4 أيام", fabric: "حرير" },
            { id: 10, brand: "T", price: "$220", originalPrice: "$260", discount: 15, likes: 530, size: "small", desc: "حقيبة يد نسائية بتصميم فاخر", colors: ["أسود", "بني", "أحمر"], sizes: "واحد", delivery: "2-4 أيام", fabric: "جلد صناعي" },
            { id: 11, brand: "CLAZZY", price: "$320", originalPrice: "$400", discount: 20, likes: 780, size: "small", desc: "بلوزة نسائية بتصميم أنيق", colors: ["أبيض", "أسود", "أحمر"], sizes: "S, M, L", delivery: "3-4 أيام", fabric: "حرير طبيعي" },
            { id: 12, brand: "CLAZZY", price: "$450", originalPrice: "$600", discount: 25, likes: 920, size: "medium", desc: "بنطال رسمي من القطن المصري", colors: ["أسود", "رمادي", "كحلي"], sizes: "28-40", delivery: "4-6 أيام", fabric: "قطن مصري" }
        ];

        // بيانات البراندات
        const brands = [
            {
                id: 1,
                name: "CLAZZY",
                category: "fashion",
                description: "علامة مصرية تقدم تصاميم عصرية وجريئة للموضة اليومية والمناسبات الخاصة. نؤمن بأن الموضة يجب أن تكون تعبيراً عن الشخصية وانعكاساً للثقافة المصرية الأصيلة مع لمسة عصرية.",
                logo: "C",
                productsCount: 42,
                year: 2018,
                origin: "القاهرة، مصر",
                likes: 12500,
                colors: ["#FF6D1F", "#FF9E6D"]
            },
            {
                id: 2,
                name: "GO K",
                category: "sports",
                description: "ملابس رياضية وأحذية بأحدث التقنيات وأعلى مستويات الجودة.",
                logo: "G",
                productsCount: 28,
                year: 2020,
                origin: "الإسكندرية، مصر",
                likes: 8900,
                colors: ["#3498db", "#2ecc71"]
            }
        ];
        // نظام الإشعارات المتكامل
const NotificationSystem = {
    // إعدادات النظام
    settings: {
        position: 'top-right',
        autoClose: 3000,
        maxNotifications: 3,
        showProgress: true
    },
    
    // أنواع الإشعارات
    types: {
        SUCCESS: 'success',
        ERROR: 'error',
        INFO: 'info'
    },
    
    // رموز الأيقونات
    icons: {
        success: 'fas fa-check-circle',
        error: 'fas fa-exclamation-circle',
        info: 'fas fa-info-circle'
    },
    
    // رسائل افتراضية
    messages: {
        addedToCart: (brand) => `تمت إضافة ${brand} إلى السلة بنجاح`,
        removedFromCart: (brand) => `تم إزالة ${brand} من السلة`,
        addedToFavorites: (brand) => `تمت إضافة ${brand} إلى المفضلة`,
        removedFromFavorites: (brand) => `تم إزالة ${brand} من المفضلة`,
        followedBrand: (brand) => `أنت تتابع الآن ${brand}`,
        unfollowedBrand: (brand) => `لم تعد تتابع ${brand}`,
        orderPlaced: () => 'تم تأكيد طلبك بنجاح',
        productShared: (brand) => `تم مشاركة ${brand} بنجاح`,
        profileUpdated: () => 'تم تحديث الملف الشخصي بنجاح',
        passwordChanged: () => 'تم تغيير كلمة المرور بنجاح',
        errorMessage: () => 'حدث خطأ، يرجى المحاولة مرة أخرى'
    },
    
    // إظهار إشعار
    show: function(options) {
        const {
            type = this.types.INFO,
            title = '',
            message = '',
            duration = this.settings.autoClose,
            icon = this.icons[type],
            action = null
        } = options;
        
        // إنشاء عنصر الإشعار
        const notification = this.createNotification({
            type,
            title,
            message,
            icon,
            action
        });
        
        // إضافة الإشعار للنظام
        this.addToSystem(notification);
        
        // إغلاق تلقائي إذا كان معطى duration
        if (duration > 0) {
            setTimeout(() => {
                this.removeNotification(notification.id);
            }, duration);
        }
        
        return notification.id;
    },
    
    // إنشاء إشعار
    createNotification: function(data) {
        const id = 'notification_' + Date.now();
        
        const notification = document.createElement('div');
        notification.className = `notification-item ${data.type}`;
        notification.id = id;
        
        notification.innerHTML = `
            <div class="notification-icon">
                <i class="${data.icon}"></i>
            </div>
            <div class="notification-content">
                ${data.title ? `<div class="notification-title">${data.title}</div>` : ''}
                <div class="notification-message">${data.message}</div>
            </div>
            <button class="notification-close" onclick="NotificationSystem.removeNotification('${id}')">
                <i class="fas fa-times"></i>
            </button>
        `;
        
        // إضافة حدث إذا كان هناك action
        if (data.action && typeof data.action === 'function') {
            notification.style.cursor = 'pointer';
            notification.addEventListener('click', data.action);
        }
        
        notification.dataset.id = id;
        return notification;
    },
    
    // إضافة الإشعار للنظام
    addToSystem: function(notification) {
        const system = document.getElementById('notification-system');
        if (!system) return;
        
        // التحكم في عدد الإشعارات
        const notifications = system.querySelectorAll('.notification-item');
        if (notifications.length >= this.settings.maxNotifications) {
            this.removeNotification(notifications[0].id);
        }
        
        system.appendChild(notification);
        
        // تأثير الظهور
        setTimeout(() => {
            notification.style.animation = 'slideInRight 0.3s ease';
        }, 10);
    },
    
    // إزالة إشعار
    removeNotification: function(id) {
        const notification = document.getElementById(id);
        if (!notification) return;
        
        notification.style.animation = 'slideOutRight 0.3s ease';
        
        setTimeout(() => {
            if (notification.parentNode) {
                notification.parentNode.removeChild(notification);
            }
        }, 300);
    },
    
    // إشعار سريع (Toast)
    toast: function(options) {
        const {
            type = this.types.INFO,
            message = '',
            duration = 2000,
            icon = this.icons[type]
        } = options;
        
        const toast = document.getElementById('notification-toast');
        if (!toast) return;
        
        // تعيين البيانات
        toast.className = `notification-toast ${type} show`;
        toast.querySelector('.toast-icon').className = `toast-icon ${icon}`;
        toast.querySelector('.toast-message').textContent = message;
        
        // إخفاء بعد المدة
        setTimeout(() => {
            toast.classList.remove('show');
            setTimeout(() => {
                toast.className = 'notification-toast';
            }, 300);
        }, duration);
    },
    
    // وظائف مساعدة
    success: function(message, options = {}) {
        return this.show({
            type: this.types.SUCCESS,
            message,
            ...options
        });
    },
    
    error: function(message, options = {}) {
        return this.show({
            type: this.types.ERROR,
            message,
            ...options
        });
    },
    
    info: function(message, options = {}) {
        return this.show({
            type: this.types.INFO,
            message,
            ...options
        });
    },
    
    // إشعار إضافة للسلة
    cartAdded: function(productName) {
        this.toast({
            type: this.types.SUCCESS,
            message: this.messages.addedToCart(productName)
        });
    },
    
    // إشعار إضافة للمفضلة
    favoriteAdded: function(productName) {
        this.toast({
            type: this.types.SUCCESS,
            message: this.messages.addedToFavorites(productName)
        });
    },
    
    // إشعار متابعة براند
    brandFollowed: function(brandName) {
        this.show({
            type: this.types.SUCCESS,
            title: 'تمت المتابعة',
            message: this.messages.followedBrand(brandName),
            duration: 2000
        });
    },
    
    // إشعار خطأ عام
    showError: function(customMessage = null) {
        this.error(customMessage || this.messages.errorMessage());
    },
    
    // مسح كل الإشعارات
    clearAll: function() {
        const system = document.getElementById('notification-system');
        if (system) {
            system.innerHTML = '';
        }
    }
};

// جعل النظام متاحاً عالمياً
window.NotificationSystem = NotificationSystem;

        // الحصول على اسم البراند من الـ URL
        function getBrandFromURL() {
            const urlParams = new URLSearchParams(window.location.search);
            const brandName = urlParams.get('brand') || 'CLAZZY';
            return brandName;
        }

        // تحميل بيانات البراند
        function loadBrandData() {
            const brandName = getBrandFromURL();
            const brand = brands.find(b => b.name === brandName) || brands[0];
            
            // تحديث واجهة البراند
            document.getElementById('brand-logo').textContent = brand.logo;
            document.getElementById('brand-name').textContent = brand.name;
            document.getElementById('brand-category').textContent = getCategoryName(brand.category);
            document.getElementById('brand-description').textContent = brand.description;
            document.getElementById('products-count').textContent = brand.productsCount;
            document.getElementById('brand-year').textContent = brand.year;
            document.getElementById('brand-likes').textContent = brand.likes.toLocaleString();
            document.getElementById('products-count-badge').textContent = `${brand.productsCount} منتج`;
            
            // تعيين لون الخلفية للوجو
            document.getElementById('brand-logo').style.background = 
                `linear-gradient(135deg, ${brand.colors[0]}, ${brand.colors[1]})`;
            
            return brand;
        }

        // توليد منتجات البراند
        function generateBrandProducts(brand) {
            const grid = document.getElementById('brand-products-grid');
            const noProductsDiv = document.getElementById('no-products');
            
            // فلترة المنتجات حسب البراند
            const brandProducts = products.filter(product => product.brand === brand.name);
            
            // تحديث العداد
            document.getElementById('products-count').textContent = brandProducts.length;
            document.getElementById('products-count-badge').textContent = `${brandProducts.length} منتج`;
            
            if (brandProducts.length === 0) {
                grid.style.display = 'none';
                noProductsDiv.style.display = 'block';
                return;
            }
            
            grid.style.display = 'block';
            noProductsDiv.style.display = 'none';
            grid.innerHTML = '';
            
            brandProducts.forEach(product => {
                createProductCard(product, grid);
            });
        }

        // إنشاء كارت منتج
        function createProductCard(product, container) {
            const item = document.createElement('div');
            item.className = 'masonry-item';
            item.dataset.id = product.id;
            
            const bgColors = [
                'linear-gradient(135deg, #2A2F3C, #3A2F4C)',
                'linear-gradient(135deg, #3A2F4C, #4A2F5C)',
                'linear-gradient(135deg, #2A3F4C, #3A4F5C)',
                'linear-gradient(135deg, #3A3F3C, #4A4F4C)'
            ];
            const randomColor = bgColors[Math.floor(Math.random() * bgColors.length)];
            
            const icons = ['fa-tshirt', 'fa-tshirt', 'fa-tshirt', 'fa-vest', 'fa-shoe-prints', 'fa-bag-shopping', 'fa-glasses', 'fa-hat-cowboy'];
            const randomIcon = icons[Math.floor(Math.random() * icons.length)];
            
            item.innerHTML = `
                <div class="product-img" style="background: ${randomColor}; display: flex; align-items: center; justify-content: center; font-size: 48px; color: rgba(255, 255, 255, 0.15); position: relative;">
                    <i class="fas ${randomIcon}"></i>
                    <button class="heart-btn-in-card" title="أضف إلى المفضلة">
                        <i class="far fa-heart"></i>
                    </button>
                </div>
                <div class="product-info">
                    <div class="brand-name">
                        <span>${product.brand}</span>
                        <div class="brand-logo">${product.brand.charAt(0)}</div>
                    </div>
                    ${product.discount > 0 ? `<div class="discount-badge">%${product.discount} خصم</div>` : ''}
                    <div class="price-section">
                        <div class="price">${product.price}</div>
                        <div class="likes">
                            <i class="fas fa-heart"></i>
                            <span>${product.likes.toLocaleString()}</span>
                        </div>
                    </div>
                </div>
            `;
            
            // إضافة حدث النقر لفتح كارت المنتج
            item.addEventListener('click', () => openProductCard(product));
            container.appendChild(item);
            
            // إضافة زر القلب
            addHeartButtonToCard(item, product);
            
            // إضافة زر السلة
            addCartButtonToCard(item, product);
        }

        // إضافة زر القلب إلى كارت المنتج
        function addHeartButtonToCard(cardElement, product) {
            const heartBtn = cardElement.querySelector('.heart-btn-in-card');
            
            // التحقق إذا المنتج في المفضلة
            const isFavorited = localStorage.getItem(`favorite_${product.id}`) === 'true';
            if (isFavorited) {
                heartBtn.classList.add('active');
                heartBtn.innerHTML = '<i class="fas fa-heart"></i>';
            }
            
            heartBtn.addEventListener('click', function(e) {
                e.stopPropagation();
                
                const currentlyFavorited = this.classList.contains('active');
                
                if (currentlyFavorited) {
                    // إزالة من المفضلة
                    this.classList.remove('active');
                    this.innerHTML = '<i class="far fa-heart"></i>';
                    localStorage.removeItem(`favorite_${product.id}`);
                    product.likes = Math.max(0, product.likes - 1);
                    
                    // تحديث العداد في الكارت
                    const likesElement = cardElement.querySelector('.likes span');
                    likesElement.textContent = product.likes.toLocaleString();
                } else {
                    // إضافة إلى المفضلة
                    this.classList.add('active');
                    this.innerHTML = '<i class="fas fa-heart"></i>';
                    localStorage.setItem(`favorite_${product.id}`, 'true');
                    product.likes++;
                    
                    // تحديث العداد في الكارت
                    const likesElement = cardElement.querySelector('.likes span');
                    likesElement.textContent = product.likes.toLocaleString();
                }
                
                // تأثير
                this.style.transform = 'scale(1.2)';
                setTimeout(() => {
                    this.style.transform = 'scale(1)';
                }, 300);
            });
        }

        // إضافة زر السلة إلى كارت المنتج
        function addCartButtonToCard(cardElement, product) {
            const productImg = cardElement.querySelector('.product-img');
            
            const cartBtn = document.createElement('button');
            cartBtn.className = 'cart-btn-in-card';
            cartBtn.innerHTML = '<i class="fas fa-cart-plus"></i>';
            cartBtn.title = 'أضف إلى السلة';
            
            cartBtn.style.cssText = `
                position: absolute;
                bottom: 15px;
                left: 15px;
                background: rgba(255, 109, 31, 0.9);
                color: white;
                border: none;
                width: 40px;
                height: 40px;
                border-radius: 50%;
                cursor: pointer;
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 18px;
                transition: all 0.3s;
                z-index: 10;
                opacity: 0;
                transform: scale(0.8);
            `;
            
            cardElement.addEventListener('mouseenter', function() {
                cartBtn.style.opacity = '1';
                cartBtn.style.transform = 'scale(1)';
            });
            
            cardElement.addEventListener('mouseleave', function() {
                cartBtn.style.opacity = '0';
                cartBtn.style.transform = 'scale(0.8)';
            });
            
            cartBtn.addEventListener('click', function(e) {
                e.stopPropagation();
                addToCart(product);
                
                this.style.background = '#2ecc71';
                this.innerHTML = '<i class="fas fa-check"></i>';
                
                setTimeout(() => {
                    this.style.background = 'rgba(255, 109, 31, 0.9)';
                    this.innerHTML = '<i class="fas fa-cart-plus"></i>';
                }, 1000);
            });
            
            productImg.appendChild(cartBtn);
        }

        // الحصول على اسم الفئة بالعربية
        function getCategoryName(category) {
            const categories = {
                'fashion': 'موضة',
                'sports': 'رياضة',
                'luxury': 'فاخرة',
                'local': 'محلية',
                'international': 'عالمية',
                'accessories': 'إكسسوارات',
                'shoes': 'أحذية'
            };
            return categories[category] || 'عام';
        }

        // إعداد التبويبات
        function setupTabs() {
            document.querySelectorAll('.brand-tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    // إزالة النشط من جميع التبويبات
                    document.querySelectorAll('.brand-tab').forEach(t => t.classList.remove('active'));
                    // إضافة النشط للتبويب المختار
                    this.classList.add('active');
                    
                    // هنا يمكنك إضافة منطق عرض المحتوى المناسب لكل تبويب
                    const tabId = this.dataset.tab;
                    // حالياً نعرض فقط المنتجات
                });
            });
        }

        // إعداد زر المتابعة
        function setupFollowButton(brand) {
    const followBtn = document.getElementById('follow-brand-btn');
    let isFollowing = localStorage.getItem(`following_${brand.name}`) === 'true';
    
    updateFollowButton(isFollowing);
    
    followBtn.addEventListener('click', function() {
        isFollowing = !isFollowing;
        localStorage.setItem(`following_${brand.name}`, isFollowing);
        
        // تحديث عدد المتابعين في الواجهة
        if (isFollowing) {
            brand.likes++;
        } else {
            brand.likes = Math.max(0, brand.likes - 1);
        }
        
        document.getElementById('brand-likes').textContent = brand.likes.toLocaleString();
        updateFollowButton(isFollowing);
        
        // استخدام نظام الإشعارات الجديد بدل showNotification
        if (isFollowing) {
            // إشعار متابعة
            NotificationSystem.brandFollowed(brand.name);
        } else {
            // إشعار إلغاء المتابعة
            NotificationSystem.info(`لم تعد تتابع ${brand.name}`, {
                duration: 2000
            });
        }
    });
    
    function updateFollowButton(following) {
        if (following) {
            followBtn.innerHTML = '<i class="fas fa-heart"></i> تابع';
            followBtn.style.background = '#e74c3c';
        } else {
            followBtn.innerHTML = '<i class="far fa-heart"></i> متابعة';
            followBtn.style.background = 'linear-gradient(135deg, var(--accent-orange), #FF9E6D)';
        }
    }
}
            function updateFollowButton(following) {
                if (following) {
                    followBtn.innerHTML = '<i class="fas fa-heart"></i> تابع';
                    followBtn.style.background = '#e74c3c';
                } else {
                    followBtn.innerHTML = '<i class="far fa-heart"></i> متابعة';
                    followBtn.style.background = 'linear-gradient(135deg, var(--accent-orange), #FF9E6D)';
                }
            }
        

        // إعداد زر المشاركة
        function setupShareButton(brand) {
            const shareBtn = document.getElementById('share-brand-btn');
            
            shareBtn.addEventListener('click', function() {
                if (navigator.share) {
                    navigator.share({
                        title: brand.name,
                        text: brand.description,
                        url: window.location.href,
                    });
                } else {
                    navigator.clipboard.writeText(`${brand.name}\n${brand.description}\n${window.location.href}`);
                    showNotification('تم نسخ رابط البراند');
                }
            });
        }

        // البحث في منتجات البراند
        function setupBrandSearch(brand) {
            const searchInput = document.getElementById('brand-search-input');
            
            searchInput.addEventListener('input', function(e) {
                const searchTerm = e.target.value.toLowerCase().trim();
                const brandProducts = products.filter(product => product.brand === brand.name);
                
                if (searchTerm === '') {
                    generateBrandProducts(brand);
                    return;
                }
                
                const filtered = brandProducts.filter(product => 
                    product.desc.toLowerCase().includes(searchTerm) ||
                    product.fabric.toLowerCase().includes(searchTerm) ||
                    product.colors.some(color => color.toLowerCase().includes(searchTerm))
                );
                
                const grid = document.getElementById('brand-products-grid');
                const noProductsDiv = document.getElementById('no-products');
                
                if (filtered.length === 0) {
                    grid.style.display = 'none';
                    noProductsDiv.style.display = 'block';
                    return;
                }
                
                grid.style.display = 'block';
                noProductsDiv.style.display = 'none';
                grid.innerHTML = '';
                
                filtered.forEach(product => {
                    createProductCard(product, grid);
                });
            });
        }

        // فتح كارت المنتج (نفس الدالة من الصفحة الرئيسية)
        function openProductCard(product) {
            const overlay = document.getElementById('product-card-overlay');
            const card = document.getElementById('flip-card');
            
            document.querySelector('.brand-name-large').textContent = product.brand;
            document.querySelector('.brand-logo-large').textContent = product.brand.charAt(0);
            document.querySelector('.product-price').innerHTML = `
                ${product.originalPrice !== product.price ? `<span class="original-price">${product.originalPrice}</span>` : ''}
                ${product.price}
            `;
            document.querySelector('.likes-large span').textContent = product.likes.toLocaleString();
            
            const discountBadge = document.querySelector('.product-price-section .discount-badge');
            if (product.discount > 0) {
                discountBadge.textContent = `%${product.discount} خصم`;
                discountBadge.style.display = 'inline-block';
            } else {
                discountBadge.style.display = 'none';
            }
            
            document.querySelector('.card-back p').textContent = product.desc;
            
            const detailsHTML = `
                <div class="detail-item">
                    <span>المقاسات المتاحة</span>
                    <span>${product.sizes}</span>
                </div>
                <div class="detail-item">
                    <span>الألوان</span>
                    <span>${product.colors.join(', ')}</span>
                </div>
                <div class="detail-item">
                    <span>نوع القماش</span>
                    <span>${product.fabric}</span>
                </div>
                <div class="detail-item">
                    <span>وقت التوصيل</span>
                    <span>${product.delivery}</span>
                </div>
            `;
            document.querySelector('.product-details').innerHTML = detailsHTML;
            
            // إعداد زر إضافة إلى السلة في الوجه الأمامي
            setupFrontCartButton(product);
            
            card.classList.remove('flipped');
            overlay.classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        // إعداد زر إضافة إلى السلة في الوجه الأمامي للفلِيب كارد
        function setupFrontCartButton(product) {
            const frontCartBtn = document.getElementById('front-cart-btn');
            if (!frontCartBtn) return;
            
            frontCartBtn.classList.remove('added');
            frontCartBtn.innerHTML = '<i class="fas fa-cart-plus"></i><span>أضف إلى السلة</span>';
            
            frontCartBtn.addEventListener('click', function(e) {
                e.stopPropagation();
                
                addToCart(product);
                
                this.classList.add('added');
                this.innerHTML = '<i class="fas fa-check"></i><span>تمت الإضافة</span>';
                
                setTimeout(() => {
                    this.classList.remove('added');
                    this.innerHTML = '<i class="fas fa-cart-plus"></i><span>أضف إلى السلة</span>';
                }, 1500);
            });
        }

        // دالة إضافة منتج للسلة
        function addToCart(product) {
            const currentCart = JSON.parse(localStorage.getItem('biyalaCart') || '[]');
            const existingItem = currentCart.find(item => item.id === product.id);
            
            if (existingItem) {
                existingItem.quantity++;
            } else {
                currentCart.push({
                    id: product.id,
                    name: product.desc || `منتج ${product.brand}`,
                    brand: product.brand,
                    price: parseInt(product.price.replace('$', '')),
                    quantity: 1,
                    image: `fas ${['fa-tshirt', 'fa-vest', 'fa-shoe-prints', 'fa-bag-shopping'][product.id % 4]}`
                });
            }
            
            localStorage.setItem('biyalaCart', JSON.stringify(currentCart));
            updateCartCounter();
            
            // تأثير إشعار بصري
            showCartNotification(product);
        }

        // عرض إشعار إضافة للسلة
        function showCartNotification(product) {
            const notification = document.createElement('div');
            notification.className = 'cart-notification';
            notification.innerHTML = `
                <i class="fas fa-check-circle"></i>
                <span>تمت إضافة ${product.brand} إلى السلة</span>
            `;
            
            notification.style.cssText = `
                position: fixed;
                top: 80px;
                right: 20px;
                background: linear-gradient(135deg, #2ecc71, #27ae60);
                color: white;
                padding: 15px 20px;
                border-radius: var(--border-radius-sm);
                display: flex;
                align-items: center;
                gap: 10px;
                z-index: 3000;
                box-shadow: 0 5px 20px rgba(46, 204, 113, 0.4);
                animation: slideIn 0.3s ease, fadeOut 0.3s ease 1.7s forwards;
                font-weight: 600;
            `;
            
            const style = document.createElement('style');
            style.textContent = `
                @keyframes slideIn {
                    from { transform: translateX(100%); opacity: 0; }
                    to { transform: translateX(0); opacity: 1; }
                }
                @keyframes fadeOut {
                    from { opacity: 1; }
                    to { opacity: 0; }
                }
            `;
            document.head.appendChild(style);
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                if (notification.parentNode) {
                    notification.parentNode.removeChild(notification);
                }
                if (style.parentNode) {
                    style.parentNode.removeChild(style);
                }
            }, 2000);
        }

        // تحديث عداد السلة
        function updateCartCounter() {
            const cartItems = JSON.parse(localStorage.getItem('biyalaCart') || '[]');
            const totalItems = cartItems.reduce((sum, item) => sum + item.quantity, 0);
            
            const cartIcon = document.getElementById('cart-icon');
            if (cartIcon) {
                const oldCounter = cartIcon.querySelector('.cart-counter');
                if (oldCounter) oldCounter.remove();
                
                if (totalItems > 0) {
                    const counter = document.createElement('span');
                    counter.className = 'cart-counter';
                    counter.textContent = totalItems > 9 ? '9+' : totalItems;
                    counter.style.cssText = `
                        position: absolute;
                        top: -8px;
                        right: -8px;
                        background: #FF6D1F;
                        color: white;
                        font-size: 12px;
                        width: 20px;
                        height: 20px;
                        border-radius: 50%;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        font-weight: bold;
                    `;
                    cartIcon.style.position = 'relative';
                    cartIcon.appendChild(counter);
                }
            }
        }

        // إغلاق كارت المنتج
        function setupProductCardClose() {
            document.getElementById('close-card').addEventListener('click', closeProductCard);
            
            document.getElementById('product-card-overlay').addEventListener('click', function(e) {
                if (e.target === this) closeProductCard();
            });
            
            function closeProductCard() {
                document.getElementById('product-card-overlay').classList.remove('active');
                document.body.style.overflow = 'auto';
            }
        }

        // تقليب كارت المنتج
        function setupProductCardFlip() {
            document.getElementById('flip-to-back').addEventListener('click', function() {
                document.getElementById('flip-card').classList.add('flipped');
            });
            
            document.getElementById('flip-to-front').addEventListener('click', function() {
                document.getElementById('flip-card').classList.remove('flipped');
            });
        }

        // زر الشراء
        function setupBuyButton() {
            document.getElementById('buy-button').addEventListener('click', function() {
                const currentBrand = document.querySelector('.brand-name-large').textContent;
                const currentProduct = products.find(p => p.brand === currentBrand);
                
                if (currentProduct) {
                    localStorage.setItem('selectedProduct', JSON.stringify({
                        id: currentProduct.id,
                        name: currentProduct.desc,
                        brand: currentProduct.brand,
                        price: parseInt(currentProduct.price.replace('$', '')),
                        selected: true
                    }));
                    window.location.href = 'Purchase page.html';
                    closeProductCard();
                }
            });
        }

        // إظهار إشعار
        function showNotification(message) {
            // يمكن تطوير هذه الدالة لاستخدام نظام إشعارات أفضل
            alert(message);
        }

        // الزر للعودة للخلف
        document.getElementById('back-button').addEventListener('click', function() {
            window.history.back();
        });

        // إعداد التنقل السفلي
        function setupBottomNav() {
            document.querySelectorAll('.nav-item').forEach(item => {
                item.addEventListener('click', function() {
                    const pageId = this.dataset.page;
                    if (pageId === 'home') {
                        window.location.href = 'index.html';
                    } else if (pageId === 'profile') {
                        window.location.href = 'settings-page.html';
                    }
                    // يمكن إضافة صفحات أخرى هنا
                });
            });
        }

        // إعداد أيقونة الحساب
        document.getElementById('account-icon').addEventListener('click', function() {
            window.location.href = 'settings-page.html';
        });

        // إعداد أيقونة السلة
        document.getElementById('cart-icon').addEventListener('click', function() {
            window.location.href = 'cart.html';
        });

        // تهيئة الصفحة
        document.addEventListener('DOMContentLoaded', function() {
            const brand = loadBrandData();
            generateBrandProducts(brand);
            setupTabs();
            setupFollowButton(brand);
            setupShareButton(brand);
            setupBrandSearch(brand);
            setupProductCardClose();
            setupProductCardFlip();
            setupBuyButton();
            setupBottomNav();
            updateCartCounter();
            
            // إضافة زر مشاهدة كل المنتجات في الفلِيب كارد
            document.getElementById('brand-profile-btn').addEventListener('click', function() {
                // لن يحدث شيء لأننا بالفعل في صفحة البراند
                closeProductCard();
            });
        });

        // تحسين الأداء على الموبايل
function optimizeForMobile() {
    // تأخير تحميل الصور غير المرئية
    const lazyImages = document.querySelectorAll('.product-img');
    
    const imageObserver = new IntersectionObserver((entries, observer) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                const img = entry.target;
                // يمكنك إضافة منطق تحميل الصور هنا
                observer.unobserve(img);
            }
        });
    });
    
    lazyImages.forEach(img => imageObserver.observe(img));
    
    // تحسين أحداث اللمس
    document.addEventListener('touchstart', function() {}, {passive: true});
    document.addEventListener('touchmove', function() {}, {passive: true});
    
    // إصلاح مشكلة الـ 100vh على iOS
    function setFullHeight() {
        const vh = window.innerHeight * 0.01;
        document.documentElement.style.setProperty('--vh', `${vh}px`);
    }
    
    setFullHeight();
    window.addEventListener('resize', setFullHeight);
    window.addEventListener('orientationchange', setFullHeight);
}

// إضافة CSS Variables للـ viewport
function addViewportCSS() {
    const style = document.createElement('style');
    style.textContent = `
        :root {
            --vh: 1vh;
        }
        
        .full-height {
            height: calc(var(--vh, 1vh) * 100);
        }
    `;
    document.head.appendChild(style);
}

// استدعاء الدوال عند التحميل
document.addEventListener('DOMContentLoaded', function() {
    addViewportCSS();
    optimizeForMobile();
});
    </script>
</body>
</html>